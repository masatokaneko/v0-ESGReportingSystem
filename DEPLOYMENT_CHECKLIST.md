# デプロイメントチェックリスト

## 🚀 Neonデータベースへの移行前チェックリスト

### 1. 環境変数の設定
- [ ] `DATABASE_URL` が `.env.local` に設定されている
- [ ] Vercelの環境変数に `DATABASE_URL` が設定されている
- [ ] 接続文字列に `?sslmode=require` が含まれている

### 2. Neonプロジェクトの準備
- [ ] Neonアカウントが作成されている
- [ ] プロジェクトが作成されている
- [ ] データベースがアクティブになっている
- [ ] 接続プーリングが有効になっている（推奨）

### 3. データベーススキーマの適用
- [ ] `neon-schema.sql` が実行されている
- [ ] テーブルが正しく作成されている
- [ ] インデックスが作成されている
- [ ] 初期データが投入されている

### 4. ローカルテスト
- [ ] `npm install --legacy-peer-deps` が完了している
- [ ] `npm run dev` でアプリケーションが起動する
- [ ] ヘルスチェックAPI (`/api/health`) が正常に応答する
- [ ] ダッシュボードが表示される
- [ ] データ入力が機能する
- [ ] データの取得が機能する

### 5. 本番環境へのデプロイ
- [ ] Gitにコミット・プッシュ済み
- [ ] Vercelで自動デプロイが成功している
- [ ] 本番環境のヘルスチェックが成功している
- [ ] 本番環境でデータベース接続が確認できる

## 📋 デプロイ後の確認事項

### 機能テスト
- [ ] ダッシュボードの表示
- [ ] ESGデータの登録
- [ ] データの検索・フィルタリング
- [ ] CSVアップロード（該当する場合）
- [ ] レポート生成（該当する場合）

### パフォーマンス
- [ ] ページ読み込み速度
- [ ] API応答時間
- [ ] データベースクエリの実行時間

### エラーモニタリング
- [ ] Vercelのログでエラーがないか確認
- [ ] ブラウザコンソールでエラーがないか確認

## 🔧 トラブルシューティング

### データベース接続エラーの場合
1. `/api/health` にアクセスして詳細を確認
2. DATABASE_URLの形式を確認
3. Neonダッシュボードでデータベースの状態を確認
4. ファイアウォール設定を確認

### ビルドエラーの場合
1. `npm install --legacy-peer-deps` を実行
2. TypeScriptエラーを確認
3. 環境変数が正しく設定されているか確認

### 実行時エラーの場合
1. Vercelのファンクションログを確認
2. ブラウザの開発者ツールでネットワークタブを確認
3. APIレスポンスのエラーメッセージを確認

## 📞 サポート

問題が解決しない場合：
- Neonのドキュメント: https://neon.tech/docs
- Vercelのドキュメント: https://vercel.com/docs
- Next.jsのドキュメント: https://nextjs.org/docs